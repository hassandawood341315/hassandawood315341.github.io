<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MediModa ‚Äî Live</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* compatibility for line-clamp */
      .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; -moz-box-orient: vertical; line-clamp: 2; overflow: hidden; }
    </style>
  </head>
  <body class="bg-stone-50 text-stone-900 font-sans">
    <div id="root"></div>
    <div id="live-server-check" class="w-full text-center py-2 bg-yellow-50 text-yellow-800 text-sm">Live Server check ‚Äî HTML loaded. If blank, open DevTools console.</div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      /* Simple emoji icon fallbacks (no bundler) */
      const Icon = ({ children, size = 16, className = '' }) => (
        <span className={className} style={{ display: 'inline-flex', alignItems: 'center', justifyContent: 'center', fontSize: size }}>
          {children}
        </span>
      );
      const ShoppingBag = (p) => <Icon {...p}>üëú</Icon>;
      const X = (p) => <Icon {...p}>‚úñÔ∏è</Icon>;
      const Star = (p) => <Icon {...p}>‚≠ê</Icon>;
      const ArrowRight = (p) => <Icon {...p}>‚û°Ô∏è</Icon>;
      const CheckCircle = (p) => <Icon {...p}>‚úÖ</Icon>;
      const Info = (p) => <Icon {...p}>‚ÑπÔ∏è</Icon>;
      const Phone = (p) => <Icon {...p}>üìû</Icon>;
      const Mail = (p) => <Icon {...p}>‚úâÔ∏è</Icon>;
      const MapPin = (p) => <Icon {...p}>üìç</Icon>;
      const Edit = (p) => <Icon {...p}>‚úèÔ∏è</Icon>;
      const Plus = (p) => <Icon {...p}>‚ûï</Icon>;
      const Trash2 = (p) => <Icon {...p}>üóëÔ∏è</Icon>;
      const LogIn = (p) => <Icon {...p}>üîë</Icon>;
      const Save = (p) => <Icon {...p}>üíæ</Icon>;
      const ArrowLeft = (p) => <Icon {...p}>‚¨ÖÔ∏è</Icon>;

      const INITIAL_PRODUCTS = [
        { id:1, name:"The Classic Pro Set", role:"MBBS & Surgery", price:45.00, description:"Engineered for the long shifts. Antimicrobial fabric with 4-way stretch. Features deep pockets for essentials and a modern tapered fit.", image:"https://images.unsplash.com/photo-1626315869436-d6781ba69d6e?auto=format&fit=crop&q=80&w=1000", color:"Navy Blue" },
        { id:2, name:"Soft-Touch Nursing Scrub", role:"Nursing & Care", price:38.50, description:"Maximum comfort for patient care. Moisture-wicking technology keeps you cool, while the yoga-waistband pants offer unmatched flexibility.", image:"https://images.unsplash.com/photo-1584820927498-cfe5211fd8bf?auto=format&fit=crop&q=80&w=1000", color:"Sage Green" },
        { id:3, name:"Executive Lab Coat", role:"MBBS & Research", price:65.00, description:"A pristine, tailored white coat for the professional. Stain-resistant technology with tablet-sized pockets and side-slit access.", image:"https://images.unsplash.com/photo-1582719471384-80e3c77e56e3?auto=format&fit=crop&q=80&w=1000", color:"Crisp White" },
        { id:4, name:"Flex-Fit Surgical Top", role:"Surgery", price:32.00, description:"Designed for the OR. Breathable mesh panels, tucked V-neck, and reinforced stitching. Moves with you during critical procedures.", image:"https://images.unsplash.com/photo-1551076805-e1869033e561?auto=format&fit=crop&q=80&w=1000", color:"Ceil Blue" },
        { id:5, name:"Nightingale Jogger Set", role:"Nursing", price:48.00, description:"Athleisure meets healthcare. Stylish jogger cuffs with a tailored top. Wrinkle-resistant fabric ensures you look professional all day.", image:"https://images.unsplash.com/photo-1605289982774-9a6fef564df8?auto=format&fit=crop&q=80&w=1000", color:"Mauve" },
        { id:6, name:"Residency Starter Pack", role:"Student", price:85.00, description:"The complete bundle. Includes 2 sets of standard scrubs and 1 stethoscope holder. Durable, washable, and ready for rounds.", image:"https://images.unsplash.com/photo-1532938911079-1b06ac7ceec7?auto=format&fit=crop&q=80&w=1000", color:"Charcoal Grey" }
      ];

      const INITIAL_CONTACT = { phone: "+1 (555) 123-4567", email: "support@medimoda.com", address: "Medical District, NY" };

      const Notification = ({ message, show }) => (
        <div className={`fixed bottom-4 right-4 bg-stone-900 text-white px-6 py-3 rounded-lg shadow-xl transform transition-all duration-300 z-[100] flex items-center gap-2 ${show ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
          <CheckCircle size={20} />
          {message}
        </div>
      );

      const Navbar = ({ cartCount, toggleCart, scrollToSection, isAdminMode }) => (
        <nav className="fixed top-0 w-full z-40 bg-white/80 backdrop-blur-md border-b border-stone-100">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div className="flex justify-between items-center h-20">
              <div className="flex items-center cursor-pointer" onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}>
                <div className="w-8 h-8 bg-stone-800 rounded-full flex items-center justify-center text-white font-bold mr-2">M</div>
                <span className="font-serif text-2xl text-stone-900 tracking-tight">MediModa</span>
                {isAdminMode && <span className="ml-2 px-2 py-0.5 bg-red-100 text-red-800 text-xs font-bold rounded-full uppercase">Admin Mode</span>}
              </div>

              <div className="hidden md:flex space-x-8 text-stone-600">
                <button onClick={() => scrollToSection('home')} className="hover:text-stone-900">Home</button>
                <button onClick={() => scrollToSection('products')} className="hover:text-stone-900">Collection</button>
                <button onClick={() => scrollToSection('about')} className="hover:text-stone-900">About</button>
              </div>

              <div className="flex items-center gap-4">
                <button onClick={toggleCart} className="relative p-2 text-stone-800 hover:bg-stone-100 rounded-full transition">
                  <ShoppingBag size={24} />
                  {cartCount > 0 && <span className="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-500 rounded-full">{cartCount}</span>}
                </button>
              </div>
            </div>
          </div>
        </nav>
      );

      const HeroCarousel = ({ products, scrollToProduct }) => {
        const [current, setCurrent] = useState(0);
        const featured = products.length >= 3 ? [products[0], products[1], products[2]] : products;
        useEffect(() => { if (!featured.length) return; const t = setInterval(() => setCurrent(p => p === featured.length - 1 ? 0 : p + 1), 5000); return () => clearInterval(t); }, [featured.length]);
        if (!featured.length) return <div className="h-[60vh] bg-stone-100 flex items-center justify-center">No products featured</div>;
        return (
          <div className="relative h-[70vh] w-full overflow-hidden bg-stone-100 mt-20">
            {featured.map((product, idx) => (
              <div key={product.id} className={`absolute inset-0 w-full h-full transition-opacity duration-1000 ${idx === current ? 'opacity-100 z-10' : 'opacity-0 z-0'}`}>
                <div className="absolute inset-0 bg-gradient-to-r from-stone-900/60 to-transparent z-10" />
                <img src={product.image} alt={product.name} className="w-full h-full object-cover" />
                <div className="absolute inset-0 z-20 flex items-center justify-start px-6 lg:px-24">
                  <div className="max-w-xl text-white space-y-6">
                    <span className="inline-block px-3 py-1 bg-white/20 rounded-full text-sm">Featured Selection</span>
                    <h1 className="text-4xl md:text-6xl font-serif">{product.name}</h1>
                    <p className="text-lg md:text-xl text-stone-200">{product.role} Edition. {product.description.substring(0,60)}...</p>
                    <button onClick={() => scrollToProduct(product.id)} className="group flex items-center gap-3 bg-white text-stone-900 px-6 py-3 rounded-full">View Details <ArrowRight size={18} /></button>
                  </div>
                </div>
              </div>
            ))}
            <div className="absolute bottom-10 left-12 z-30 flex space-x-3">{featured.map((_,i)=>(<button key={i} onClick={()=>setCurrent(i)} className={`h-1 rounded-full ${i===current?'w-12 bg-white':'w-4 bg-white/40'}`} />))}</div>
          </div>
        );
      };

      const ProductCard = ({ product, addToCart }) => (
        <div className="group bg-white rounded-xl shadow-sm hover:shadow-xl transition-all overflow-hidden border border-stone-100 flex flex-col h-full">
          <div className="relative aspect-[3/4] overflow-hidden bg-stone-200"><img src={product.image} alt={product.name} className="w-full h-full object-cover" /><div className="absolute top-3 left-3"><span className="px-3 py-1 bg-white/90 rounded-md text-xs font-bold">{product.role}</span></div></div>
          <div className="p-6 flex flex-col flex-grow"><div className="flex justify-between items-start mb-2"><h3 className="text-lg font-bold font-serif">{product.name}</h3><span className="text-lg font-medium">${parseFloat(product.price).toFixed(2)}</span></div><p className="text-stone-500 text-sm mb-4 line-clamp-2 flex-grow">{product.description}</p><div className="flex items-center justify-between mt-auto pt-4 border-t border-stone-100"><span className="text-xs text-stone-400">Available in {product.color}</span><button onClick={()=>addToCart(product)} className="flex items-center gap-2 bg-stone-900 text-white px-4 py-2 rounded-lg"><ShoppingBag size={16}/> Add to Cart</button></div></div>
        </div>
      );

      const CartDrawer = ({ isOpen, close, cart, removeFromCart, updateQuantity, checkout }) => {
        const total = cart.reduce((s,i)=>s + i.price * i.quantity, 0);
        return (
          <>
            <div className={`fixed inset-0 bg-stone-900/40 z-50 transition-opacity ${isOpen?'opacity-100 pointer-events-auto':'opacity-0 pointer-events-none'}`} onClick={close} />
            <div className={`fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-2xl z-50 transform transition-transform ${isOpen?'translate-x-0':'translate-x-full'}`}>
              <div className="p-6 border-b flex justify-between items-center bg-stone-50"><h2 className="text-xl font-serif font-bold">Your Cart</h2><button onClick={close} className="p-2 rounded-full"><X size={20}/></button></div>
              <div className="flex-1 overflow-y-auto p-6 space-y-6">{cart.length===0?(<div className="h-full flex flex-col items-center justify-center text-stone-400 space-y-4"><ShoppingBag size={48} className="opacity-20"/><p>Your cart is empty.</p><button onClick={close} className="underline">Continue Shopping</button></div>):cart.map(item=>(<div key={item.id} className="flex gap-4"><div className="w-20 h-24 bg-stone-100 rounded-md overflow-hidden"><img src={item.image} alt="" className="w-full h-full object-cover"/></div><div className="flex-1 flex flex-col justify-between"><div><h3 className="font-bold text-sm">{item.name}</h3><p className="text-xs text-stone-500">{item.role}</p></div><div className="flex justify-between items-end"><div className="flex items-center border rounded-md"><button onClick={()=>updateQuantity(item.id, Math.max(0, item.quantity-1))} className="px-2">-</button><span className="px-2">{item.quantity}</span><button onClick={()=>updateQuantity(item.id, item.quantity+1)} className="px-2">+</button></div><span className="font-bold">${(item.price*item.quantity).toFixed(2)}</span></div></div></div>))}</div>
              {cart.length>0 && <div className="p-6 bg-stone-50 border-t space-y-4"><div className="flex justify-between text-stone-600"><span>Subtotal</span><span>${total.toFixed(2)}</span></div><div className="flex justify-between text-xl font-bold"><span>Total</span><span>${total.toFixed(2)}</span></div><button onClick={checkout} className="w-full bg-stone-900 text-white py-4 rounded-xl">Proceed to Checkout <ArrowRight size={18}/></button></div>}
            </div>
          </>
        );
      };

      const CheckoutModal = ({ isOpen, close, cart, total, clearCart }) => {
        const [formData, setFormData] = useState({ name:'', email:'', phone:'', address:'', zip:'', city:'' });
        const [step, setStep] = useState('form');

        // Auto-close success message after 3 seconds
        useEffect(() => {
          let timer;
          if (step === 'success') {
            timer = setTimeout(() => {
              clearCart();
              setStep('form');
            }, 3000);
          }
          return () => clearTimeout(timer);
        }, [step, clearCart]);

        // only return early AFTER hooks have been declared
        if (!isOpen) return null;

        const handleChange = (e) => {
          setFormData({ ...formData, [e.target.name]: e.target.value });
        };

        const handleSubmit = async (e) => {
          e.preventDefault();
          setStep('processing');

          const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzGrKJanKdSJIoP16WENopXWs3TuWa_occDlz_83qZhQlhzr8X737SMGPFyCpgfxOU/exec';

          const payload = {
            orderId: 'ORD-' + Math.floor(Math.random() * 100000),
            timestamp: new Date().toISOString(),
            customer: formData,
            items: cart.map(i => `${i.name} (x${i.quantity})`).join(', '),
            total: total
          };

          try {
            await fetch(GOOGLE_SCRIPT_URL, {
              method: 'POST',
              mode: 'no-cors',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(payload)
            });

            setStep('success');

          } catch (error) {
            console.error('Submission Error:', error);
            setStep('error');
          }
        };

        // Special Full-Screen Success Overlay
        if (step === 'success') {
          return (
            <div className="fixed inset-0 z-[100] bg-stone-900/30 backdrop-blur-2xl flex flex-col items-center justify-center text-center p-4 animate-in fade-in duration-500">
              <div className="bg-white/80 backdrop-blur-xl p-12 rounded-3xl shadow-2xl transform scale-110 flex flex-col items-center max-w-md w-full border border-white/40">
                <div className="w-24 h-24 bg-emerald-500 text-white rounded-full flex items-center justify-center mb-6 shadow-lg shadow-emerald-500/30 ring-4 ring-emerald-100">
                  <CheckCircle size={48} strokeWidth={3} />
                </div>
                <h2 className="text-4xl font-serif font-bold text-stone-900 mb-2">Purchase Successful</h2>
                <p className="text-stone-600 text-lg">Thank you for your order, {formData.name ? formData.name.split(' ')[0] : ''}!</p>
                <div className="mt-6 w-full h-1 bg-stone-100 rounded-full overflow-hidden">
                   <div className="h-full bg-emerald-500 animate-[width_3s_linear_forwards] w-0" style={{ animationName: 'width', animationDuration: '3s', animationTimingFunction: 'linear', animationFillMode: 'forwards' }}></div>
                </div>
              </div>
              <style>{`
                @keyframes width {
                  from { width: 0%; }
                  to { width: 100%; }
                }
              `}</style>
            </div>
          );
        }

        return (
          <div className="fixed inset-0 bg-stone-900/80 backdrop-blur-md z-[60] flex items-start md:items-center justify-center pt-8 p-4 overflow-auto">
            <div className="bg-white rounded-2xl shadow-2xl w-full max-w-2xl overflow-y-auto flex flex-col max-h-[90vh]" style={{ WebkitOverflowScrolling: 'touch' }}>

              {step === 'form' && (
                <div className="flex flex-col h-full">
                  <div className="p-6 bg-stone-50 border-b border-stone-100 flex justify-between items-center">
                    <h2 className="text-2xl font-serif font-bold text-stone-800">Secure Checkout</h2>
                    <button onClick={close} className="text-stone-500 hover:text-stone-800"><X /></button>
                  </div>

                  <form onSubmit={handleSubmit} className="overflow-y-auto p-6 md:p-8 grid md:grid-cols-2 gap-8">
                    <div className="space-y-6">
                      <h3 className="font-bold text-stone-700 mb-4 flex items-center gap-2">
                        <span className="w-6 h-6 rounded-full bg-stone-800 text-white flex items-center justify-center text-xs">1</span>
                        Contact Information
                      </h3>
                      <div className="space-y-4">
                        <div>
                          <label className="block text-xs font-bold text-stone-500 uppercase mb-1">Full Name *</label>
                          <input required name="name" value={formData.name} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="Dr. Jane Doe" />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="block text-xs font-bold text-stone-500 uppercase mb-1">Phone *</label>
                            <input required name="phone" type="tel" value={formData.phone} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="+1 234..." />
                          </div>
                          <div>
                            <label className="block text-xs font-bold text-stone-500 uppercase mb-1">Email *</label>
                            <input required name="email" type="email" value={formData.email} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="jane@med.com" />
                          </div>
                        </div>
                      </div>

                      <h3 className="font-bold text-stone-700 mt-8 mb-4 flex items-center gap-2">
                        <span className="w-6 h-6 rounded-full bg-stone-800 text-white flex items-center justify-center text-xs">2</span>
                        Shipping Address
                      </h3>
                      <div className="space-y-4">
                        <div>
                          <label className="block text-xs font-bold text-stone-500 uppercase mb-1">Street Address *</label>
                          <input required name="address" value={formData.address} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="123 Medical Drive" />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                          <div>
                            <label className="block text-xs font-bold text-stone-500 uppercase mb-1">City *</label>
                            <input required name="city" value={formData.city} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="New York" />
                          </div>
                          <div>
                            <label className="block text-xs font-bold text-stone-500 uppercase mb-1">ZIP / Postal *</label>
                            <input required name="zip" value={formData.zip} onChange={handleChange} className="w-full border border-stone-200 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-stone-400" placeholder="10001" />
                          </div>
                        </div>
                      </div>
                    </div>

                    <div className="bg-stone-50 p-6 rounded-xl h-fit">
                      <h3 className="font-bold text-stone-700 mb-4">Order Summary</h3>
                      <div className="space-y-3 mb-6">
                        {cart.map(item => (
                          <div key={item.id} className="flex justify-between text-sm">
                            <span className="text-stone-600">{item.name} <span className="text-xs opacity-70">x{item.quantity}</span></span>
                            <span className="font-medium">${(item.price * item.quantity).toFixed(2)}</span>
                          </div>
                        ))}
                      </div>

                      <div className="border-t border-stone-200 pt-4 flex justify-between items-center mb-6">
                        <span className="font-bold text-lg">Total</span>
                        <span className="font-bold text-2xl text-stone-800">${total.toFixed(2)}</span>
                      </div>

                      <button 
                        type="submit"
                        disabled={!formData.name || !formData.email || !formData.address}
                        className="w-full bg-emerald-600 hover:bg-emerald-700 disabled:bg-stone-300 text-white py-4 rounded-lg font-bold shadow-lg transition-all"
                      >
                        Place Order
                      </button>

                      <p className="text-xs text-center text-stone-400 mt-4 flex items-center justify-center gap-1">
                        <Info size={12} />
                        Orders are processed securely.
                      </p>
                    </div>
                  </form>
                </div>
              )}

              {step === 'processing' && (
                <div className="p-12 flex flex-col items-center justify-center space-y-6 text-center h-full">
                  <div className="w-16 h-16 border-4 border-stone-200 border-t-emerald-500 rounded-full animate-spin"></div>
                  <h3 className="text-xl font-bold text-stone-700">Submitting Order...</h3>
                  <p className="text-stone-500">Please wait while we connect to the server.</p>
                </div>
              )}

              {step === 'error' && (
                <div className="p-12 flex flex-col items-center justify-center space-y-6 text-center h-full">
                  <div className="w-20 h-20 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4">
                    <X size={40} />
                  </div>
                  <h2 className="text-2xl font-serif font-bold text-stone-800">Something went wrong</h2>
                  <p className="text-stone-600 max-w-md">We couldn't connect to the server. Please check your internet connection and try again.</p>
                  <button onClick={() => setStep('form')} className="bg-stone-900 text-white px-8 py-3 rounded-full hover:bg-stone-700 transition shadow-lg mt-4">Try Again</button>
                </div>
              )}

            </div>
          </div>
        );
      };

      const AdminDashboard = ({ isOpen, close, products, setProducts, contact, setContact }) => {
        const [activeTab, setActiveTab] = useState('products');
        const [editingProduct, setEditingProduct] = useState(null);
        if(!isOpen) return null;
        const handleProductUpdate = e=>{ e.preventDefault(); if(!editingProduct) return; if(editingProduct.id) setProducts(products.map(p=>p.id===editingProduct.id?editingProduct:p)); else setProducts([...products, {...editingProduct, id:Date.now()}]); setEditingProduct(null); };
        const deleteProduct = id=>{ if(confirm('Are you sure?')) setProducts(products.filter(p=>p.id!==id)); };
        return (
          <div className="fixed inset-0 bg-stone-100 z-50 overflow-y-auto">
            <div className="max-w-7xl mx-auto p-8">
              <div className="flex justify-between items-center mb-8">
                <div className="flex items-center gap-4">
                  <button onClick={close} className="p-2"><ArrowLeft/></button>
                  <h1 className="text-3xl font-serif font-bold">Admin Dashboard</h1>
                </div>
                <button onClick={close} className="bg-stone-900 text-white px-6 py-2 rounded-lg">Exit Admin</button>
              </div>

              <div className="flex gap-4 mb-8 border-b pb-1">
                <button onClick={()=>{setActiveTab('products'); setEditingProduct(null);}} className={`${activeTab==='products'?'text-stone-900 border-b-2 border-stone-900':'text-stone-400'} px-4 py-2`}>Manage Products</button>
                <button onClick={()=>setActiveTab('contact')} className={`${activeTab==='contact'?'text-stone-900 border-b-2 border-stone-900':'text-stone-400'} px-4 py-2`}>Manage Contact Info</button>
              </div>

              {activeTab==='products' && (
                <div>
                  {!editingProduct ? (
                    <div>
                      <div className="flex justify-between mb-6">
                        <h2 className="text-xl font-bold">Product List ({products.length})</h2>
                        <button onClick={()=>setEditingProduct({name:'',role:'',price:0,description:'',image:'',color:''})} className="bg-emerald-600 text-white px-4 py-2 rounded-lg"><Plus/> Add Product</button>
                      </div>
                      <div className="grid grid-cols-1 gap-4">
                        {products.map(p=>(
                          <div key={p.id} className="bg-white p-4 rounded-lg shadow-sm flex items-center justify-between border">
                            <div className="flex items-center gap-4"><img src={p.image} className="w-16 h-16 object-cover rounded-md" alt=""/><div><h3 className="font-bold text-lg">{p.name}</h3><p className="text-stone-500 text-sm">{p.role} - ${parseFloat(p.price).toFixed(2)}</p></div></div>
                            <div className="flex gap-2"><button onClick={()=>setEditingProduct(p)} className="p-2 text-blue-600"><Edit/></button><button onClick={()=>deleteProduct(p.id)} className="p-2 text-red-600"><Trash2/></button></div>
                          </div>
                        ))}
                      </div>
                    </div>
                  ) : (
                    <div className="bg-white p-8 rounded-xl shadow-lg max-w-2xl mx-auto">
                      <h3 className="text-xl font-bold mb-6">{editingProduct.id?'Edit Product':'New Product'}</h3>
                      <form onSubmit={handleProductUpdate} className="space-y-4">
                        <div><label className="block text-sm font-bold mb-1">Name</label><input required className="w-full border p-2 rounded" value={editingProduct.name} onChange={e=>setEditingProduct({...editingProduct,name:e.target.value})}/></div>
                        <div className="grid grid-cols-2 gap-4"><div><label className="block text-sm font-bold mb-1">Role/Category</label><input required className="w-full border p-2 rounded" value={editingProduct.role} onChange={e=>setEditingProduct({...editingProduct,role:e.target.value})}/></div><div><label className="block text-sm font-bold mb-1">Price</label><input required type="number" step="0.01" className="w-full border p-2 rounded" value={editingProduct.price} onChange={e=>setEditingProduct({...editingProduct,price:parseFloat(e.target.value)})}/></div></div>
                        <div><label className="block text-sm font-bold mb-1">Description</label><textarea required className="w-full border p-2 rounded" rows="3" value={editingProduct.description} onChange={e=>setEditingProduct({...editingProduct,description:e.target.value})}/></div>
                        <div><label className="block text-sm font-bold mb-1">Image URL</label><input required className="w-full border p-2 rounded" value={editingProduct.image} onChange={e=>setEditingProduct({...editingProduct,image:e.target.value})}/></div>
                        <div><label className="block text-sm font-bold mb-1">Color Name</label><input required className="w-full border p-2 rounded" value={editingProduct.color} onChange={e=>setEditingProduct({...editingProduct,color:e.target.value})}/></div>
                        <div className="flex gap-4 pt-4"><button type="button" onClick={()=>setEditingProduct(null)} className="flex-1 py-3">Cancel</button><button type="submit" className="flex-1 py-3 bg-stone-900 text-white">Save Product</button></div>
                      </form>
                    </div>
                  )}
                </div>
              )}

              {activeTab==='contact' && (
                <div className="max-w-xl mx-auto bg-white p-8 rounded-xl shadow-lg"><h3 className="text-xl font-bold mb-6">Edit Contact Information</h3><div className="space-y-4"><div><label className="block text-sm font-bold mb-1">Phone Number</label><input className="w-full border p-2 rounded" value={contact.phone} onChange={e=>setContact({...contact,phone:e.target.value})}/></div><div><label className="block text-sm font-bold mb-1">Email Address</label><input className="w-full border p-2 rounded" value={contact.email} onChange={e=>setContact({...contact,email:e.target.value})}/></div><div><label className="block text-sm font-bold mb-1">Physical Address</label><input className="w-full border p-2 rounded" value={contact.address} onChange={e=>setContact({...contact,address:e.target.value})}/></div><button className="w-full bg-emerald-600 text-white py-3 rounded-lg mt-4"><Save/> Save Changes</button></div></div>
              )}
            </div>
          </div>
        );
      };

      function App(){
        const [products,setProducts]=useState(INITIAL_PRODUCTS);
        const [contactInfo,setContactInfo]=useState(INITIAL_CONTACT);
        const [cart,setCart]=useState([]);
        const [isCartOpen,setIsCartOpen]=useState(false);
        const [isCheckoutOpen,setIsCheckoutOpen]=useState(false);
        const [notify,setNotify]=useState({show:false,message:''});
        const [isAdminOpen,setIsAdminOpen]=useState(false);
        const [isAdminMode,setIsAdminMode]=useState(false);
        const productsRef=useRef(null); const aboutRef=useRef(null);
        const [offsetY,setOffsetY]=useState(0); useEffect(()=>{ const onScroll=()=>setOffsetY(window.pageYOffset); window.addEventListener('scroll', onScroll); return ()=>window.removeEventListener('scroll', onScroll); },[]);

        const scrollToSection=section=>{ if(section==='products'&&productsRef.current) productsRef.current.scrollIntoView({behavior:'smooth'}); else if(section==='about'&&aboutRef.current) aboutRef.current.scrollIntoView({behavior:'smooth'}); else if(section==='home') window.scrollTo({top:0, behavior:'smooth'}); };
        const scrollToProduct=id=>{ if(productsRef.current) productsRef.current.scrollIntoView({behavior:'smooth'}); };
        const addToCart=product=>{ setCart(prev=>{ const ex=prev.find(p=>p.id===product.id); if(ex) return prev.map(p=>p.id===product.id?{...p, quantity:p.quantity+1}:p); return [...prev, {...product, quantity:1}]; }); setNotify({show:true, message:`Added ${product.name}`}); setTimeout(()=>setNotify({show:false,message:''}),3000); setIsCartOpen(true); };
        const removeFromCart=id=>setCart(prev=>prev.filter(p=>p.id!==id));
        const updateQuantity=(id,quantity)=>{ if(quantity===0) removeFromCart(id); else setCart(prev=>prev.map(p=>p.id===id?{...p,quantity}:p)); };
        const clearCart=()=>{ setCart([]); setIsCheckoutOpen(false); };
        const startCheckout=()=>{ setIsCartOpen(false); setIsCheckoutOpen(true); };
        const handleAdminLogin=()=>{ const password=prompt('Enter Admin Password:'); if(password==='admin123'){ setIsAdminMode(true); setIsAdminOpen(true); } else alert('Incorrect password'); };
        const cartTotal=cart.reduce((s,i)=>s + i.price * i.quantity, 0);

        return (
          <div className="min-h-screen bg-stone-50 text-stone-900 font-sans selection:bg-stone-300">
            <div className="fixed inset-0 pointer-events-none z-0 opacity-40" style={{ backgroundImage: `url('https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?auto=format&fit=crop&q=80&w=2000')`, backgroundSize:'cover', backgroundPosition:'center', filter:'blur(100px)', transform:`translateY(${offsetY * 0.2}px)` }} />

            <Navbar cartCount={cart.reduce((a,b)=>a + b.quantity, 0)} toggleCart={()=>setIsCartOpen(true)} scrollToSection={scrollToSection} isAdminMode={isAdminMode} />

            <main className="relative z-10">
              <HeroCarousel products={products} scrollToProduct={scrollToProduct} />

              <div className="bg-white/80 backdrop-blur-md border-b border-stone-100 py-12"><div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-3 gap-8 text-center"><div className="flex flex-col items-center gap-3"><div className="p-4 bg-stone-100 rounded-full text-stone-800"><Star size={24}/></div><h3 className="font-bold text-lg">Premium Fabric</h3><p className="text-stone-500 text-sm max-w-xs">Antimicrobial, wrinkle-resistant, and 4-way stretch for long shifts.</p></div><div className="flex flex-col items-center gap-3"><div className="p-4 bg-stone-100 rounded-full text-stone-800"><CheckCircle size={24}/></div><h3 className="font-bold text-lg">Modern Fit</h3><p className="text-stone-500 text-sm max-w-xs">Tailored specifically for medical professionals who value style.</p></div><div className="flex flex-col items-center gap-3"><div className="p-4 bg-stone-100 rounded-full text-stone-800"><MapPin size={24}/></div><h3 className="font-bold text-lg">Global Shipping</h3><p className="text-stone-500 text-sm max-w-xs">Fast delivery to hospitals and clinics worldwide.</p></div></div></div>

        <section id="products" ref={productsRef} className="py-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto"><div className="text-center mb-16 space-y-4"><h2 className="text-4xl font-serif font-bold text-stone-800">The Collection</h2><p className="text-stone-500 max-w-2xl mx-auto">Discover our latest arrivals designed for MBBS students, nurses, and surgeons. Functionality meets minimalist design.</p></div><div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-10">{products.map(p=>(<ProductCard key={p.id} product={p} addToCart={addToCart}/>))}</div></section>

              <footer ref={aboutRef} className="bg-stone-900 text-stone-300 py-20 mt-12"><div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-12"><div className="col-span-1 md:col-span-2 space-y-6"><div className="flex items-center text-white"><div className="w-8 h-8 bg-white rounded-full flex items-center justify-center text-stone-900 font-bold mr-2">M</div><span className="font-serif text-2xl">MediModa</span></div><p className="max-w-md text-stone-400">Elevating the standard of medical apparel. We believe what you wear affects how you perform. Our scrubs are designed to support you through every round, surgery, and shift.</p></div><div><h4 className="text-white font-bold mb-6">Contact Us</h4><ul className="space-y-4 text-sm"><li className="flex items-center gap-2"><Phone size={16}/> {contactInfo.phone}</li><li className="flex items-center gap-2"><Mail size={16}/> {contactInfo.email}</li><li className="flex items-center gap-2"><MapPin size={16}/> {contactInfo.address}</li></ul></div><div><h4 className="text-white font-bold mb-6">Policies</h4><ul className="space-y-2 text-sm text-stone-400"><li className="hover:text-white cursor-pointer">Shipping & Returns</li><li className="hover:text-white cursor-pointer">Group Orders</li><li className="hover:text-white cursor-pointer">Size Guide</li><li onClick={handleAdminLogin} className="hover:text-white cursor-pointer flex items-center gap-2 mt-4 text-stone-600"><LogIn size={14}/> Admin Login</li></ul></div></div><div className="max-w-7xl mx-auto px-4 mt-16 pt-8 border-t border-stone-800 text-center text-xs text-stone-600">¬© 2024 MediModa Scrubs. All rights reserved.</div></footer>

            </main>

            <CartDrawer isOpen={isCartOpen} close={()=>setIsCartOpen(false)} cart={cart} removeFromCart={removeFromCart} updateQuantity={updateQuantity} checkout={startCheckout} />
            <CheckoutModal isOpen={isCheckoutOpen} close={()=>setIsCheckoutOpen(false)} cart={cart} total={cartTotal} clearCart={clearCart} />
            <AdminDashboard isOpen={isAdminOpen} close={()=>setIsAdminOpen(false)} products={products} setProducts={setProducts} contact={contactInfo} setContact={setContactInfo} />
            <Notification show={notify.show} message={notify.message} />
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      try { console.log('Mounting React app...'); root.render(<App />); } catch(err) { console.error('React mount error', err); const el=document.getElementById('live-server-check'); if(el) el.textContent='Error mounting app ‚Äî see console.'; }
    </script>
  </body>
</html>
